(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1286],{3598:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>l,PP:()=>o,ji:()=>c});var r=s(7780),n=s(2115),a=s(9373),i=s(5695);function l(){let{data:e}=(0,a.I)({queryKey:["userinfo"],queryFn:async()=>{let e=await (0,r.gL)({});return e?(console.log("mine result",e),e):{message:{firstname:"",lastname:"",phone:"",email:""}}}}),{data:t}=(0,a.I)({queryKey:["accountInfo"],queryFn:async()=>{let e=await (0,r.im)({});return(console.log("mine result",e),e)?e:{account:{accountBalance:0}}}});return console.log("userAccount data is",e),{userAccount:t,userInfo:e}}let o=()=>{let[e,t]=(0,n.useState)(0),s=(0,i.useRouter)(),r=(0,n.useCallback)(async()=>{try{let e=await fetch("".concat("http://localhost:60000","/api/user/logout"),{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Sorry, an error occurred");let s=await e.json();console.log("This is the response",s),(null==s?void 0:s.statusCode)&&t(s.statusCode)}catch(e){console.error("This is the error",e)}},[]);return(0,n.useEffect)(()=>{e&&s.push("/")},[e,s]),{Logout:r}},c=e=>{let t=(0,i.useRouter)(),[s,r]=(0,n.useState)("dummy message"),[a,l]=(0,n.useState)(!1);return{Verify:async()=>{if(console.log(Object.values(e)),""===Object.values(e)[0]){r("Bank Pin fields cannot be empty or invalid"),l(!0);return}try{r("");let s=await fetch("".concat("http://localhost:60000","/api/pin/verify-bank-pin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await s.json();if(!s.ok){if(console.log(n),401===n.status)return void t.push("/");l(!0),r(n.message);return}if(console.log("This is the response",n),n){r(n.status),l(!0);return}}catch(e){console.error("This is the error",e),r(e.message),l(!0)}},message:s,setMessage:r,visible:a,setVisible:l}}},5453:(e,t,s)=>{"use strict";s.d(t,{v:()=>o});var r=s(2115);let n=e=>{let t,s=new Set,r=(e,r)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=r?r:"object"!=typeof n||null===n)?n:Object.assign({},t,n),s.forEach(s=>s(t,e))}},n=()=>t,a={setState:r,getState:n,getInitialState:()=>i,subscribe:e=>(s.add(e),()=>s.delete(e))},i=t=e(r,n,a);return a},a=e=>e?n(e):n,i=e=>e,l=e=>{let t=a(e),s=e=>(function(e,t=i){let s=r.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return r.useDebugValue(s),s})(t,e);return Object.assign(s,t),s},o=e=>e?l(e):l},6304:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5155),n=s(2115),a=s(6766),i=s(3598),l=s(5695),o=s(9059);let c=()=>{let{setMessage:e}=(0,o.oz)(),t=(0,n.useRef)([]),[s,c]=(0,n.useState)(Array(6).fill("")),u=(0,l.useRouter)(),d={userPin:s.join("")},{Verify:m,message:f,visible:h,setVisible:g,setMessage:p}=(0,i.ji)(d);console.log("mes",typeof f),(0,n.useEffect)(()=>{if(200===f){u.push("/admin/confirm-transfer"),e("confirmed");return}},[f,u]);let v=(e,r)=>{if(!/^[0-9]?$/.test(e))return;let n=[...s];if(n[r]=e,c(n),e&&r<5){var a;null==(a=t.current[r+1])||a.focus()}},x=(e,r)=>{if("Backspace"===e.key&&!s[r]&&r>0){var n;let e=[...s];e[r-1]="",c(e),null==(n=t.current[r-1])||n.focus()}};return(0,r.jsxs)(r.Fragment,{children:[""===f&&(0,r.jsx)("div",{id:"preloader",children:(0,r.jsx)("div",{"data-loader":"dual-ring"})}),(0,r.jsx)("div",{className:"container-fluid m-0 p-0",children:(0,r.jsxs)("div",{className:"row g-0 vh-100",children:[(0,r.jsx)("div",{className:"col-sm-6 col-md-6 col-lg-6",children:(0,r.jsx)("div",{className:"d-flex justify-content-center h-100 align-items-center bg-white",children:(0,r.jsxs)("div",{className:"d-flex flex-column w-50 p-1 rounded bg-white",children:[(0,r.jsx)("div",{className:"d-flex justify-content-center",children:(0,r.jsx)(a.default,{className:"rounded",src:"/images/hand.tiff",alt:"",width:200,height:200})}),(0,r.jsx)("div",{className:"d-flex justify-content-center",children:(0,r.jsx)("p",{className:"text-primary fs-5 text-nowrap fw-medium text-center text-uppercase",children:"Pin Verification"})}),(0,r.jsx)("div",{className:"container-fluid d-flex justify-content-center align-items-center px-2",children:(0,r.jsx)("div",{className:"col-12 px-3 fs-6 fw-normal w-100 mb-4 text-center",children:"Please provide your bank pin to complete the process."})})]})})}),(0,r.jsx)("div",{className:"col-sm-6 col-md-6 col-lg-6 bg-primary",children:(0,r.jsx)("div",{className:"d-flex justify-content-center h-100 align-items-center",children:(0,r.jsxs)("div",{className:"d-flex flex-column w-50 p-1 rounded",children:[![200].includes(f)&&h&&(0,r.jsxs)("div",{className:"alert alert-secondary d-flex align-items-center justify-content-between p-2",children:[(0,r.jsxs)("div",{className:"d-flex align-items-center w-100",children:[(0,r.jsx)("div",{className:"featured-box-icon bg-light-3 text-brown rounded-circle me-2 d-flex align-items-center justify-content-center",style:{width:"30px",height:"30px"},children:(0,r.jsx)("i",{className:"fas fa-bullhorn text-danger"})}),(0,r.jsx)("p",{className:"text-2 mb-0 text-center text-dark fw-normal",children:f})]}),(0,r.jsx)("button",{type:"button",className:"btn-close",onClick:function(){g(!1),p("dummy message")}})]}),(0,r.jsx)("p",{className:"text-white fs-5 text-nowrap text-center",children:"Verify Your Bank Pin"}),(0,r.jsx)("div",{className:"col-12 px-3 fs-6 fw-light w-100 mb-4 text-white",children:"Enter the 6-digit code associated with your account to complete the process."}),(0,r.jsx)("div",{className:"d-flex justify-content-between gap-1 mb-3",children:s.map((e,s)=>(0,r.jsx)("input",{type:"text",inputMode:"numeric",maxLength:1,className:"w-100 p-1 text-center fw-medium",value:e,onChange:e=>v(e.target.value,s),onKeyDown:e=>x(e,s),ref:e=>{t.current[s]=e}},s))}),(0,r.jsx)("button",{className:"btn text",style:{background:"white"},onClick:m,children:"Verify Pin"})]})})})]})})]})}},6786:(e,t,s)=>{"use strict";s.d(t,{Zr:()=>n});let r=e=>t=>{try{let s=e(t);if(s instanceof Promise)return s;return{then:e=>r(e)(s),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>r(t)(e)}}},n=(e,t)=>(s,n,a)=>{let i,l={storage:function(e,t){let s;try{s=e()}catch(e){return}return{getItem:e=>{var t;let r=e=>null===e?null:JSON.parse(e,void 0),n=null!=(t=s.getItem(e))?t:null;return n instanceof Promise?n.then(r):r(n)},setItem:(e,t)=>s.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>s.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1,c=new Set,u=new Set,d=l.storage;if(!d)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),s(...e)},n,a);let m=()=>{let e=l.partialize({...n()});return d.setItem(l.name,{state:e,version:l.version})},f=a.setState;a.setState=(e,t)=>{f(e,t),m()};let h=e((...e)=>{s(...e),m()},n,a);a.getInitialState=()=>h;let g=()=>{var e,t;if(!d)return;o=!1,c.forEach(e=>{var t;return e(null!=(t=n())?t:h)});let a=(null==(t=l.onRehydrateStorage)?void 0:t.call(l,null!=(e=n())?e:h))||void 0;return r(d.getItem.bind(d))(l.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];else{if(l.migrate){let t=l.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[r,a]=e;if(s(i=l.merge(a,null!=(t=n())?t:h),!0),r)return m()}).then(()=>{null==a||a(i,void 0),i=n(),o=!0,u.forEach(e=>e(i))}).catch(e=>{null==a||a(void 0,e)})};return a.persist={setOptions:e=>{l={...l,...e},e.storage&&(d=e.storage)},clearStorage:()=>{null==d||d.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},l.skipHydration||g(),i||h}},6814:(e,t,s)=>{Promise.resolve().then(s.bind(s,6304))},9059:(e,t,s)=>{"use strict";s.d(t,{Q5:()=>a,nc:()=>i,oz:()=>l});var r=s(5453),n=s(6786);let a=(0,r.v)()((0,n.Zr)(e=>({transfers:[],setTransfers:t=>e({transfers:t})}),{name:"transfer-storage",storage:{getItem:e=>{let t=sessionStorage.getItem(e);return t?JSON.parse(t):null},setItem:(e,t)=>{sessionStorage.setItem(e,JSON.stringify(t))},removeItem:e=>sessionStorage.removeItem(e)}})),i=(0,r.v)()((0,n.Zr)(e=>({auth:null,setAuth:t=>e({auth:t})}),{name:"auth-storage",storage:{getItem:e=>{let t=sessionStorage.getItem(e);return t?JSON.parse(t):null},setItem:(e,t)=>{sessionStorage.setItem(e,JSON.stringify(t))},removeItem:e=>sessionStorage.removeItem(e)}})),l=(0,r.v)()((0,n.Zr)(e=>({message:"",setMessage:t=>e({message:t})}),{name:"auth-message",storage:{getItem:e=>{let t=sessionStorage.getItem(e);return t?JSON.parse(t):null},setItem:(e,t)=>{sessionStorage.setItem(e,JSON.stringify(t))},removeItem:e=>sessionStorage.removeItem(e)}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[4766,8333,6766,7780,8441,1684,7358],()=>t(6814)),_N_E=e.O()}]);