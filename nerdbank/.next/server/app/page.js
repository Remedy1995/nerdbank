(()=>{var e={};e.id=974,e.ids=[974],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12247:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>A});var s=t(60687),a=t(43210),n=t(49384),o=t(82348);function i(...e){return(0,o.QP)((0,n.$)(e))}let l=a.forwardRef(({className:e,type:r,...t},a)=>(0,s.jsx)("input",{type:r,className:i("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...t}));l.displayName="Input";var d=t(81391),c=t(27605),u=t(69467),m=t(24224);let p=(0,m.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),f=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(u.b,{ref:t,className:i(p(),e),...r}));f.displayName=u.b.displayName;let h=c.Op,x=a.createContext({}),g=({...e})=>(0,s.jsx)(x.Provider,{value:{name:e.name},children:(0,s.jsx)(c.xI,{...e})}),b=()=>{let e=a.useContext(x),r=a.useContext(v),{getFieldState:t,formState:s}=(0,c.xW)(),n=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=r;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...n}},v=a.createContext({}),y=a.forwardRef(({className:e,...r},t)=>{let n=a.useId();return(0,s.jsx)(v.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:t,className:i("space-y-2",e),...r})})});y.displayName="FormItem";let j=a.forwardRef(({className:e,...r},t)=>{let{error:a,formItemId:n}=b();return(0,s.jsx)(f,{ref:t,className:i(a&&"text-destructive",e),htmlFor:n,...r})});j.displayName="FormLabel";let w=a.forwardRef(({...e},r)=>{let{error:t,formItemId:a,formDescriptionId:n,formMessageId:o}=b();return(0,s.jsx)(d.DX,{ref:r,id:a,"aria-describedby":t?`${n} ${o}`:`${n}`,"aria-invalid":!!t,...e})});w.displayName="FormControl",a.forwardRef(({className:e,...r},t)=>{let{formDescriptionId:a}=b();return(0,s.jsx)("p",{ref:t,id:a,className:i("text-[0.8rem] text-muted-foreground",e),...r})}).displayName="FormDescription";let N=a.forwardRef(({className:e,children:r,...t},a)=>{let{error:n,formMessageId:o}=b(),l=n?String(n?.message):r;return l?(0,s.jsx)("p",{ref:a,id:o,className:i("text-[0.8rem] font-medium text-destructive",e),...t,children:l}):null});N.displayName="FormMessage";var P=t(63442);let I=(0,m.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),k=a.forwardRef(({className:e,variant:r,size:t,asChild:a=!1,...n},o)=>{let l=a?d.DX:"button";return(0,s.jsx)(l,{className:i(I({variant:r,size:t,className:e})),ref:o,...n})});k.displayName="Button";var S=t(45880),F=t(2877),_=t(16189),O=t(37657),R=t(82311);function A(){let e=(0,_.useRouter)(),{setAuth:r,auth:t}=(0,O.nc)(),[n,o]=(0,a.useState)([]),[i,d]=(0,a.useState)(""),u=S.z.object({email:S.z.string().email({message:"Please enter a valid email address."}),password:S.z.string().min(2,{message:"password must be at least 2 characters."})}),m=(0,c.mN)({resolver:(0,P.u)(u),defaultValues:{email:"",password:""}}),{mutate:p,status:f,isError:x,isSuccess:b}=(0,F.yh)({onSuccess:s=>{let a=Object.values(s).filter(e=>"object"==typeof e&&null!==e).flatMap(e=>e?.userData||[]);console.log("userAccount",a),a.length>0&&r(a[0]?.user),console.log("pushed to store",t),a[0]?.isAdmin?e.push("/admin/dashboard"):e.push("/client/dashboard")},onError:e=>{console.log("The data",f,x,b),console.log(Object.values(e).slice(1,2).toString()),d(Object.values(e)[2].message)}});async function v(e){d(""),console.log(e),p({body:e})}return(0,s.jsx)("div",{id:"main-wrapper overflow-none",children:(0,s.jsx)("div",{id:"content",children:(0,s.jsx)("div",{className:"container py-5",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-md-9 col-lg-7 col-xl-5 mx-auto",children:(0,s.jsxs)("div",{className:"bg-white shadow-md rounded p-3 pt-sm-4 pb-sm-5 px-sm-5",children:[(0,s.jsx)("h3",{className:"fw-500 text-center text-primary",children:"Nerd Bank"}),(0,s.jsx)("hr",{className:"mx-n3 mx-sm-n5"}),i?(0,s.jsx)("p",{className:"text-3 text-danger font-bold text-center mb-0",children:i}):"idle"===f&&(0,s.jsx)("p",{className:"lead text-center",children:"We are glad to see you again!"}),(0,s.jsx)("p",{className:"text-4 font-bold text-start text-primary mb-1",children:"Please Sign in to continue"}),(0,s.jsx)(h,{...m,children:(0,s.jsxs)("form",{onSubmit:m.handleSubmit(v),className:"space-y-8",children:[(0,s.jsx)(g,{control:m.control,name:"email",render:({field:e})=>(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsxs)(y,{children:[(0,s.jsx)(j,{className:"form-label",children:"Email"}),(0,s.jsx)(w,{children:(0,s.jsx)(l,{placeholder:"Please provide your email",...e,id:"emailAddress",className:"form-control py-2"})}),(0,s.jsx)(N,{className:"text-danger p-1"})]})})}),(0,s.jsx)(g,{control:m.control,name:"password",render:({field:e})=>(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsxs)(y,{children:[(0,s.jsx)(j,{className:"form-label",children:"Password"}),(0,s.jsx)(w,{children:(0,s.jsx)(l,{type:"password",placeholder:"Please provide your password",...e,id:"loginPassword",className:"form-control py-2"})}),(0,s.jsx)(N,{className:"text-danger p-1"})]})})}),(0,s.jsx)("div",{className:"d-grid mb-3",children:(0,s.jsx)(k,{className:"btn btn-primary",type:"submit",disabled:"pending"===f,children:"pending"===f?(0,s.jsx)(R.A,{color:"#FFFFFF",size:10}):"Submit"})})]})}),(0,s.jsx)("p",{className:"text-3 text-muted text-center mb-0",children:"2025 NerdBank. All Rights Reserved."})]})})})})})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21204:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/asoribabackend/PycharmProjects/nerdbank/nerdbank/src/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/asoribabackend/PycharmProjects/nerdbank/nerdbank/src/app/page.tsx","default")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37657:(e,r,t)=>{"use strict";t.d(r,{Q5:()=>n,nc:()=>o,oz:()=>i});var s=t(26787),a=t(59350);let n=(0,s.v)()((0,a.Zr)(e=>({transfers:[],setTransfers:r=>e({transfers:r})}),{name:"transfer-storage",storage:{getItem:e=>{let r=sessionStorage.getItem(e);return r?JSON.parse(r):null},setItem:(e,r)=>{sessionStorage.setItem(e,JSON.stringify(r))},removeItem:e=>sessionStorage.removeItem(e)}})),o=(0,s.v)()((0,a.Zr)(e=>({auth:null,setAuth:r=>e({auth:r})}),{name:"auth-storage",storage:{getItem:e=>{let r=sessionStorage.getItem(e);return r?JSON.parse(r):null},setItem:(e,r)=>{sessionStorage.setItem(e,JSON.stringify(r))},removeItem:e=>sessionStorage.removeItem(e)}})),i=(0,s.v)()((0,a.Zr)(e=>({message:"",setMessage:r=>e({message:r})}),{name:"auth-message",storage:{getItem:e=>{let r=sessionStorage.getItem(e);return r?JSON.parse(r):null},setItem:(e,r)=>{sessionStorage.setItem(e,JSON.stringify(r))},removeItem:e=>sessionStorage.removeItem(e)}}))},45634:(e,r,t)=>{"use strict";t.d(r,{Ay:()=>i,PP:()=>l,ji:()=>d});var s=t(2877),a=t(43210),n=t(29494),o=t(16189);function i(){let{data:e}=(0,n.I)({queryKey:["userinfo"],queryFn:async()=>{let e=await (0,s.gL)({});return e?(console.log("mine result",e),e):{message:{firstname:"",lastname:"",phone:"",email:""}}}}),{data:r}=(0,n.I)({queryKey:["accountInfo"],queryFn:async()=>{let e=await (0,s.im)({});return(console.log("mine result",e),e)?e:{account:{accountBalance:0}}}});return console.log("userAccount data is",e),{userAccount:r,userInfo:e}}let l=()=>{let[e,r]=(0,a.useState)(0),t=(0,o.useRouter)(),s=(0,a.useCallback)(async()=>{try{let e=await fetch("http://localhost:60000/api/user/logout",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Sorry, an error occurred");let t=await e.json();console.log("This is the response",t),t?.statusCode&&r(t.statusCode)}catch(e){console.error("This is the error",e)}},[]);return(0,a.useEffect)(()=>{e&&t.push("/")},[e,t]),{Logout:s}},d=e=>{let r=(0,o.useRouter)(),[t,s]=(0,a.useState)("dummy message"),[n,i]=(0,a.useState)(!1);return{Verify:async()=>{if(console.log(Object.values(e)),""===Object.values(e)[0]){s("Bank Pin fields cannot be empty or invalid"),i(!0);return}try{s("");let t=await fetch("http://localhost:60000/api/pin/verify-bank-pin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(!t.ok){if(console.log(a),401===a.status)return void r.push("/");i(!0),s(a.message);return}if(console.log("This is the response",a),a){s(a.status),i(!0);return}}catch(e){console.error("This is the error",e),s(e.message),i(!0)}},message:t,setMessage:s,visible:n,setVisible:i}}},45758:(e,r,t)=>{Promise.resolve().then(t.bind(t,51932))},50486:(e,r,t)=>{Promise.resolve().then(t.bind(t,21204))},51932:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var s=t(60687),a=t(12247),n=t(16189),o=t(60555),i=t(43210);let l=({children:e})=>{let r=(0,n.useRouter)(),t=(0,n.usePathname)(),{data:a,isLoading:l,isError:d}=(0,o.w)();return(console.log("router path name",t),(0,i.useEffect)(()=>{if(console.log("Auth Status :",a,d,l),!l&&a?.userInfo){let{isAdmin:e}=a?.userInfo.message;e?r.push("/admin/dashboard"):r.push("client/dashboard"),console.log("userInfo info is",a?.userInfo)}},[a?.userInfo]),l)?(0,s.jsx)("div",{className:"d-flex justify-content-center align-items-center h-100",children:(0,s.jsx)("div",{id:"preloader",children:(0,s.jsx)("div",{"data-loader":"dual-ring"})})}):a?.userInfo?null:e};function d(){return(0,s.jsx)(l,{children:(0,s.jsx)(a.default,{})})}},60555:(e,r,t)=>{"use strict";t.d(r,{w:()=>n});var s=t(45634),a=t(29494);let n=()=>{let{userAccount:e,userInfo:r}=(0,s.Ay)();return console.log("userAccount info hooks",r),(0,a.I)({queryKey:["authStatus"],queryFn:async()=>{if(!e)throw Error("Not authenticated");return{userInfo:r}},staleTime:0,refetchOnWindowFocus:!1})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78615:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=t(65239),a=t(48088),n=t(88170),o=t.n(n),i=t(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let d={children:["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,21204)),"/Users/asoribabackend/PycharmProjects/nerdbank/nerdbank/src/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/Users/asoribabackend/PycharmProjects/nerdbank/nerdbank/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/asoribabackend/PycharmProjects/nerdbank/nerdbank/src/app/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},79551:e=>{"use strict";e.exports=require("url")}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,446,557,494,956,145,130],()=>t(78615));module.exports=s})();